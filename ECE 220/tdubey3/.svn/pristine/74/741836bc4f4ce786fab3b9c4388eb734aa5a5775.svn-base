swap_topology incorrect: execution out of time